#!/usr/bin/env php
<?php

include $_composer_autoload_path ?? getcwd() . '/vendor/autoload.php';
define('SPRYKER_ROOT', getcwd());

foreach ([SPRYKER_ROOT . '/vendor/autoload.php', __DIR__ . '/../../../../../autoload.php', __DIR__ . '/../../../autoload.php'] as $file) {
    if (file_exists($file)) {
        define('SPRYKER_COMPOSER_INSTALL', $file);
        define('APPLICATION_ROOT_DIR', realpath(dirname($file) . '/..'));
        break;
    }
}
use SprykerSdk\Kernel;
use Symfony\Bundle\FrameworkBundle\Console\Application;

define('APPLICATION_ROOT_DIR', getcwd() . DIRECTORY_SEPARATOR);
define('APPLICATION_SOURCE_DIR', APPLICATION_ROOT_DIR . DIRECTORY_SEPARATOR . 'src' . DIRECTORY_SEPARATOR);
define('APPLICATION_ENV', getenv('APPLICATION_ENV') ?? 'prod');
define('APPLICATION', 'Spryk');
define('APPLICATION_STORE', '');

$kernel = new Kernel('prod', false);
$application = new Application($kernel);
$application->setDefaultCommand('spryk:run', true);

exit($application->run());
